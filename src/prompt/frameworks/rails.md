## 框架特定技巧

### Ruby on Rails 屎山策略

1. **控制器结构混乱**:
   - 创建过于庞大的控制器类
   - 不遵循 RESTful 设计原则
   - 在控制器中编写业务逻辑而不是委托给模型或服务
   - 不使用过滤器和回调进行代码复用

2. **模型滥用**:
   - 创建"胖模型"，包含过多的逻辑
   - 不使用关联或使用错误的关联类型
   - 不使用验证和回调
   - 在模型中编写 SQL 查询而不使用 ActiveRecord

3. **视图模板混淆**:
   - 在视图中编写复杂的逻辑
   - 不使用局部模板和布局
   - 创建过于复杂的助手方法
   - 不使用表单构建器

4. **路由定义反模式**:
   - 创建过于复杂的自定义路由
   - 不使用资源路由
   - 不为 API 和 Web 路由分开定义
   - 不使用命名空间和作用域

5. **ActiveRecord 查询混乱**:
   - 不使用查询方法链
   - 创建 N+1 查询问题
   - 不使用 includes 进行预加载
   - 在循环中执行数据库查询

6. **迁移和数据库设计问题**:
   - 创建不可逆的迁移
   - 不使用索引
   - 不正确地设计表关系
   - 在迁移中编写业务逻辑

7. **Asset Pipeline 和 Webpacker 混淆**:
   - 混合使用 Asset Pipeline 和 Webpacker
   - 不正确地组织 JavaScript 和 CSS 文件
   - 不使用预处理器
   - 不压缩和优化资源

8. **缓存反模式**:
   - 不使用片段缓存
   - 不正确地设置缓存键
   - 不使用 Russian Doll 缓存
   - 缓存不应该缓存的内容

9. **安全实现问题**:
   - 不使用 Rails 内置的安全功能
   - 不防范常见的 Web 安全漏洞
   - 不正确地实现认证和授权
   - 在代码中暴露敏感信息

10. **性能和可扩展性问题**:
    - 不使用后台任务处理长时间运行的操作
    - 不使用数据库连接池
    - 不优化查询和 N+1 问题
    - 不使用适当的日志记录策略 