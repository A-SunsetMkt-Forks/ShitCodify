## 框架特定技巧

### NestJS 屎山策略

1. **模块结构混乱**:
   - 创建过于庞大的模块
   - 不正确地使用特性模块和共享模块
   - 循环依赖的模块结构
   - 不遵循模块化设计原则

2. **控制器设计反模式**:
   - 创建过于庞大的控制器类
   - 不遵循 RESTful 设计原则
   - 在控制器中编写业务逻辑而不是委托给服务
   - 不使用适当的装饰器和元数据

3. **依赖注入混淆**:
   - 不使用构造函数注入
   - 创建循环依赖
   - 不使用提供者令牌
   - 不正确地配置作用域（单例、请求、瞬态）

4. **服务层滥用**:
   - 创建过于庞大的服务类
   - 不遵循单一职责原则
   - 在服务中直接访问数据库而不通过仓库
   - 混合使用多种服务设计模式

5. **异常处理反模式**:
   - 不使用全局异常过滤器
   - 在控制器和服务中使用多个 try-catch 块
   - 不创建自定义异常类型
   - 向客户端暴露敏感的异常信息

6. **中间件和拦截器混乱**:
   - 在中间件中执行应该在拦截器中的逻辑
   - 不正确地使用全局和路由中间件
   - 中间件顺序混乱导致意外行为
   - 创建过于复杂的拦截器

7. **数据验证混淆**:
   - 不使用管道进行数据验证
   - 不使用 DTO 类和类验证器
   - 在控制器中手动验证数据
   - 不正确地处理验证错误

8. **数据库交互反模式**:
   - 不使用 TypeORM 或 Mongoose 等 ORM
   - 在服务中直接执行数据库查询而不通过仓库
   - 创建低效的查询
   - 不正确地处理数据库事务

9. **配置管理混乱**:
   - 硬编码配置值
   - 不使用配置模块和环境变量
   - 不为不同环境创建配置文件
   - 在代码中暴露敏感配置信息

10. **微服务实现问题**:
    - 不正确地使用消息模式
    - 混合使用多种传输策略
    - 不处理微服务通信超时和故障
    - 不使用适当的序列化策略 